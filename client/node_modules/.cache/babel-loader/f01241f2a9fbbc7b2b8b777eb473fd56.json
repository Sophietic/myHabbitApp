{"ast":null,"code":"import moment from 'moment';\n\nconst currentRunStreakCalc = (userFromDB, setRunStreak) => {\n  let oneRunStreak = 0;\n  const currentTime = moment().unix();\n\n  for (let i = 0; i < userFromDB.data.length; i++) {\n    if (userFromDB.data[i + 1] !== undefined) {\n      // oneRunStreak = 1;\n      const prevUpdated = Date.parse(userFromDB.data[i].updatedAt);\n      const currentUpdated = Date.parse(userFromDB.data[i + 1].updatedAt);\n\n      if (prevUpdated !== Date.parse(userFromDB.data[i].createdAt)) {\n        if (currentTime - prevUpdated < 86400) {\n          //defines current run streak: within the day\n          if (currentUpdated - prevUpdated < 86400 && userFromDB.data[i].completed === true) {\n            //for every session completed in a 24hr window, add 1 to the runStreak. \n            oneRunStreak++;\n          } else {\n            //else break the run streak, push it to array, and start again at 1.\n            // longestRunStreakArray.push(oneRunStreak);\n            oneRunStreak = 0;\n          }\n        }\n      }\n    } else {\n      if (userFromDB.data[i].completed === true) {\n        oneRunStreak++;\n      } // longestRunStreakArray.push(oneRunStreak);\n\n\n      oneRunStreak = 0;\n      console.log(oneRunStreak);\n    }\n  } // const highestRunStreak = Math.max.apply(null, longestRunStreakArray);\n  // setRunStreak(highestRunStreak);\n\n};","map":{"version":3,"sources":["/home/sophiepa/ironhack/finalproject/myIronhackProject/client/src/components/streaks/Streaks.js"],"names":["moment","currentRunStreakCalc","userFromDB","setRunStreak","oneRunStreak","currentTime","unix","i","data","length","undefined","prevUpdated","Date","parse","updatedAt","currentUpdated","createdAt","completed","console","log"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;;AAEA,MAAMC,oBAAoB,GAAG,CAACC,UAAD,EAAaC,YAAb,KAA8B;AACvD,MAAIC,YAAY,GAAG,CAAnB;AACA,QAAMC,WAAW,GAAGL,MAAM,GAAGM,IAAT,EAApB;;AAEA,OAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGL,UAAU,CAACM,IAAX,CAAgBC,MAAnC,EAA2CF,CAAC,EAA5C,EAAgD;AAC9C,QAAIL,UAAU,CAACM,IAAX,CAAgBD,CAAC,GAAC,CAAlB,MAAyBG,SAA7B,EAAwC;AACtC;AACA,YAAMC,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWX,UAAU,CAACM,IAAX,CAAgBD,CAAhB,EAAmBO,SAA9B,CAApB;AACA,YAAMC,cAAc,GAAGH,IAAI,CAACC,KAAL,CAAWX,UAAU,CAACM,IAAX,CAAgBD,CAAC,GAAC,CAAlB,EAAqBO,SAAhC,CAAvB;;AAEA,UAAIH,WAAW,KAAKC,IAAI,CAACC,KAAL,CAAWX,UAAU,CAACM,IAAX,CAAgBD,CAAhB,EAAmBS,SAA9B,CAApB,EAA8D;AAC5D,YAAGX,WAAW,GAAGM,WAAd,GAA4B,KAA/B,EAAsC;AAAE;AACpC,cAAGI,cAAc,GAAGJ,WAAjB,GAA+B,KAA/B,IAAwCT,UAAU,CAACM,IAAX,CAAgBD,CAAhB,EAAmBU,SAAnB,KAAiC,IAA5E,EAAkF;AAChF;AACAb,YAAAA,YAAY;AACb,WAHD,MAGO;AACL;AACA;AACAA,YAAAA,YAAY,GAAG,CAAf;AACD;AACJ;AACF;AAEF,KAlBD,MAkBO;AACL,UAAGF,UAAU,CAACM,IAAX,CAAgBD,CAAhB,EAAmBU,SAAnB,KAAiC,IAApC,EAA2C;AACzCb,QAAAA,YAAY;AACb,OAHI,CAIL;;;AACAA,MAAAA,YAAY,GAAG,CAAf;AACAc,MAAAA,OAAO,CAACC,GAAR,CAAYf,YAAZ;AACD;AAEF,GAhCsD,CAkCvD;AACA;;AACD,CApCH","sourcesContent":["import moment from 'moment';\n\nconst currentRunStreakCalc = (userFromDB, setRunStreak) => {\n    let oneRunStreak = 0;\n    const currentTime = moment().unix()\n  \n    for(let i = 0; i < userFromDB.data.length; i++) {\n      if (userFromDB.data[i+1] !== undefined) { \n        // oneRunStreak = 1;\n        const prevUpdated = Date.parse(userFromDB.data[i].updatedAt)\n        const currentUpdated = Date.parse(userFromDB.data[i+1].updatedAt)\n  \n        if (prevUpdated !== Date.parse(userFromDB.data[i].createdAt)) {\n          if(currentTime - prevUpdated < 86400) { //defines current run streak: within the day\n              if(currentUpdated - prevUpdated < 86400 && userFromDB.data[i].completed === true) {\n                //for every session completed in a 24hr window, add 1 to the runStreak. \n                oneRunStreak++;\n              } else {\n                //else break the run streak, push it to array, and start again at 1.\n                // longestRunStreakArray.push(oneRunStreak);\n                oneRunStreak = 0;\n              }\n          }  \n        }\n  \n      } else {\n        if(userFromDB.data[i].completed === true ) {\n          oneRunStreak++;\n        }\n        // longestRunStreakArray.push(oneRunStreak);\n        oneRunStreak = 0;\n        console.log(oneRunStreak)\n      }\n  \n    }\n  \n    // const highestRunStreak = Math.max.apply(null, longestRunStreakArray);\n    // setRunStreak(highestRunStreak);\n  }"]},"metadata":{},"sourceType":"module"}